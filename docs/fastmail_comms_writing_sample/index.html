<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta http-equiv="X-Clacks-Overhead" content="GNU Terry Pratchett" />
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Jack Higgins</title>
<meta name="title" content="Jack Higgins" />
<meta name="description" content="Fastmail Writing Samples
Context
Thousands of Fastmail customers use the product to host one or more simple static websites. Due to some changes to our internal networks, the IP addresses that users&rsquo; websites were hosted on were scheduled to change. We could make these changes automatically for customers hosting their DNS at Fastmail, but we needed those who were not to update DNS records at their host.
I wrote a set of communications, sent to over a thousand customers, to explain the situation and required steps to affected customers." />
<meta name="keywords" content="" />


<meta property="og:url" content="http://localhost:1313/fastmail_comms_writing_sample/">
  <meta property="og:site_name" content="Jack Higgins">
  <meta property="og:title" content="Jack Higgins">
  <meta property="og:description" content="Fastmail Writing Samples Context Thousands of Fastmail customers use the product to host one or more simple static websites. Due to some changes to our internal networks, the IP addresses that users’ websites were hosted on were scheduled to change. We could make these changes automatically for customers hosting their DNS at Fastmail, but we needed those who were not to update DNS records at their host.
I wrote a set of communications, sent to over a thousand customers, to explain the situation and required steps to affected customers.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">




  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Jack Higgins">
  <meta name="twitter:description" content="Fastmail Writing Samples Context Thousands of Fastmail customers use the product to host one or more simple static websites. Due to some changes to our internal networks, the IP addresses that users’ websites were hosted on were scheduled to change. We could make these changes automatically for customers hosting their DNS at Fastmail, but we needed those who were not to update DNS records at their host.
I wrote a set of communications, sent to over a thousand customers, to explain the situation and required steps to affected customers.">




  <meta itemprop="name" content="Jack Higgins">
  <meta itemprop="description" content="Fastmail Writing Samples Context Thousands of Fastmail customers use the product to host one or more simple static websites. Due to some changes to our internal networks, the IP addresses that users’ websites were hosted on were scheduled to change. We could make these changes automatically for customers hosting their DNS at Fastmail, but we needed those who were not to update DNS records at their host.
I wrote a set of communications, sent to over a thousand customers, to explain the situation and required steps to affected customers.">
  <meta itemprop="wordCount" content="1190">
<meta name="referrer" content="no-referrer-when-downgrade" />

  <style>
  body {
    font-family: Verdana, sans-serif;
    margin: auto;
    padding: 20px;
    max-width: 720px;
    text-align: left;
    background-color: #fff;
    word-wrap: break-word;
    overflow-wrap: break-word;
    line-height: 1.5;
    color: #444;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6,
  strong,
  b {
    color: #222;
  }

  a {
    color: #3273dc;
     
  }

  .title {
    text-decoration: none;
    border: 0;
  }

  .title span {
    font-weight: 400;
  }

  nav a {
    margin-right: 10px;
  }

  textarea {
    width: 100%;
    font-size: 16px;
  }

  input {
    font-size: 16px;
  }

  content {
    line-height: 1.6;
  }

  table {
    width: 100%;
  }

  img {
    max-width: 100%;
  }

  code {
    padding: 2px 5px;
    background-color: #f2f2f2;
  }

  pre code {
    color: #222;
    display: block;
    padding: 20px;
    white-space: pre-wrap;
    font-size: 14px;
    overflow-x: auto;
  }

  div.highlight pre {
    background-color: initial;
    color: initial;
  }

  div.highlight code {
    background-color: unset;
    color: unset;
  }

  blockquote {
    border-left: 1px solid #999;
    color: #222;
    padding-left: 20px;
    font-style: italic;
  }

  footer {
    padding: 25px;
    text-align: center;
  }

  .helptext {
    color: #777;
    font-size: small;
  }

  .errorlist {
    color: #eba613;
    font-size: small;
  }

   
  ul.blog-posts {
    list-style-type: none;
    padding: unset;
  }

  ul.blog-posts li {
    display: flex;
  }

  ul.blog-posts li span {
    flex: 0 0 130px;
  }

  ul.blog-posts li a:visited {
    color: #8b6fcb;
  }

  @media (prefers-color-scheme: dark) {
    body {
      background-color: #333;
      color: #ddd;
    }

    h1,
    h2,
    h3,
    h4,
    h5,
    h6,
    strong,
    b {
      color: #eee;
    }

    a {
      color: #8cc2dd;
    }

    code {
      background-color: #777;
    }

    pre code {
      color: #ddd;
    }

    blockquote {
      color: #ccc;
    }

    textarea,
    input {
      background-color: #252525;
      color: #ddd;
    }

    .helptext {
      color: #aaa;
    }
  }

</style>

</head>

<body>
  <header><a href="/" class="title">
  <h2>Jack Higgins</h2>
</a>
<nav><a href="/">Home</a>


</nav>
</header>
  <main>

<content>
  <h1 id="fastmail-writing-samples">Fastmail Writing Samples</h1>
<h3 id="context">Context</h3>
<p>Thousands of Fastmail customers use the product to host one or more simple static websites. Due to some changes to our internal networks, the IP addresses that users&rsquo; websites were hosted on were scheduled to change. We could make these changes automatically for customers hosting their DNS at Fastmail, but we needed those who were not to update DNS records at their host.</p>
<p>I wrote a set of communications, sent to over a thousand customers, to explain the situation and required steps to affected customers.</p>
<p>One of the messages sent is the message below. This particular message would have been sent to any customers with one website hosted at Fastmail, and where we detected that the DNS was hosted by Cloudflare. (Due to the wide variety of DNS hosts and configurations used by our users, I wrote multiple sets of instructions for some of the more popular DNS hosts, so that we could provide more specific instructions to the large majority of Fastmail users).</p>
<h3 id="message">Message</h3>
<p>Dear <strong>$CUSTOMER_NAME</strong>,</p>
<p>Our systems show that you are currently hosting a website on your Fastmail account. It also shows that the DNS for this website is hosted at an external DNS provider (Cloudflare). As a result of some scheduled technical changes on our end, we’ll need you to update some DNS at your external DNS provider to continue hosting these websites at Fastmail.</p>
<p>To provide some more context, when you host a website at the root (or apex) of your domain, you have to enter the IP addresses of the web server hosting your website. Because you are using an external DNS provider for your domain, you had to enter the IP addresses of the Fastmail web server on the external DNS provider&rsquo;s website. These IP addresses are changing, and you will need to update them at your external DNS provider by <strong>$CURRENT_DATE + 2 months</strong>.</p>
<p>We have identified the following domains that need updating:</p>
<ul>
<li><strong>$example.tld</strong></li>
</ul>
<p>As mentioned above, the DNS for this domain appears to be hosted by Cloudflare. Cloudflare supports a feature called &ldquo;CNAME flattening&rdquo;, which we recommend using instead of specific IP addresses.</p>
<p>To set this up, please follow these steps:</p>
<ol>
<li>Log in to your <a href="https://dash.cloudflare.com/login">Cloudflare dashboard</a> and select an account.</li>
<li>Find the <strong>$example.tld</strong> domain and click on it.</li>
<li>Go to <strong>DNS &gt; DNS Records</strong> at the top right of the screen.</li>
<li>For each <strong>$example.tld</strong> record, you should see one or more A type records with content of the form <strong>$CURRENT_IP</strong> .</li>
<li>If there is more than one A type record for <strong>$example.tld</strong> , click <strong>Edit</strong> and then <strong>Delete</strong> on each of them until there is only one A record left.</li>
<li>Click <strong>Edit</strong> on the final A record for <strong>$example.tld</strong>.</li>
<li>Change the <strong>Type</strong> to <strong>CNAME</strong> .</li>
<li>Change the <strong>Target</strong> to <strong>web.fastmail.com</strong>.</li>
<li>Ensure <strong>Proxy status</strong> is <strong>DNS only</strong>.</li>
<li>Click <strong>Save</strong>.</li>
</ol>
<p>The DNS for your domain will now point to our new IP addresses. These changes should not cause any interruption to the access of your website.</p>
<p>Please note that if the described changes are not made by <strong>$DATE</strong>, your domain will no longer point to your website content, and the website will no longer be accessible via the domain.</p>
<p>If you have any questions or concerns about this change or the steps you need to take, please reply to this message and our Support team will be happy to assist.</p>
<h2 id="ticket-examples">Ticket examples</h2>
<blockquote>
<p>Hello Fastmail Support WIzards!</p>
<p>I&rsquo;m trying to set up another domain (example.com) in my Fastmail account, but I seem to be having issues getting the DKIM records to be accepted/marked as verified by Fastmail. I&rsquo;ve set up the authoritative DNS (Cloudflare) as specified in your documentation, and it matches the configuration used by my other domains set up in Fastmail. Could you please have a look and let me know if I&rsquo;m missing something? All other record types show as verified successfully.</p>
<p>Configuration of the Cloudflare Zone is managed by Terraform.</p>
<p>Please see the attached screenshots of my DNS record configuration in the Cloudflare control panel.</p>
<p>Cheers,</p>
<p>$customer_name</p>
</blockquote>
<p>Hello $customer_name,</p>
<p>Thank you for reaching out to Fastmail support! I&rsquo;m sorry to hear you&rsquo;re having issues with these DKIM records, but I&rsquo;m happy to assist.</p>
<p>I&rsquo;ve taken a look at your existing DNS configuration for <code>example.com</code>, and I can see that your three DKIM records are configured as we require. However, they don&rsquo;t appear to be resolving correctly. I note that your domain is hosted on Cloudflare, which we sometimes see causing issues by flattening CNAME records. This is mentioned briefly in our Cloudflare help article: <a href="https://www.fastmail.help/hc/en-us/articles/1500000277962-Adding-MX-records-to-Cloudflare">https://www.fastmail.help/hc/en-us/articles/1500000277962-Adding-MX-records-to-Cloudflare</a>.</p>
<p>While I can see in the attached screenshot that you have CNAME flattening disabled for each of these three DKIM records, some Cloudflare accounts have an option that enables flattening for all CNAME records added on certain zones.</p>
<p>As a first troubleshooting step here, may I ask that you try logging into your Cloudflare account to check if the <strong>CNAME flattening for all CNAME records</strong> option is turned on for the relevant zone, as described in the following Cloudflare article? <a href="https://developers.cloudflare.com/dns/cname-flattening/set-up-cname-flattening/">https://developers.cloudflare.com/dns/cname-flattening/set-up-cname-flattening/</a></p>
<p>If this option is enabled, please try disabling it, as I believe this should resolve the issue.</p>
<p>Please let me know how this goes, or if this option isn&rsquo;t enabled, and I&rsquo;ll be happy to continue troubleshooting.</p>
<blockquote>
<p>Hi,</p>
<p>Can I clarify something with you? This is about SPF.</p>
<p>I want to be able to send mail from other mail servers (Cloudflare and Google), in addition to Fastmail&rsquo;s. Where do I put those server details? Do I need to add them to my existing SPF record, or should I create a new one?</p>
<p>I currently merged my existing records into one SPF record for example.com:</p>
<pre tabindex="0"><code>v=spf1 include:_spf.mx.cloudflare.net include:spf.fastmail.com include:mxlogin.com include:_spf.google.com ?all
</code></pre><p>However, Fastmail gives me an error for this record. Please advise.</p>
<p>$customer_name</p>
</blockquote>
<p>Hello $customer_name,</p>
<p>Thanks for getting back in touch with Fastmail support. I&rsquo;m happy to clarify here.</p>
<p>You were right here to merge the separate SPF records into a singular record, as Sender Policy Framework (SPF) records will only work if a single record is detected.</p>
<p>The issue in this case is that SPF requires that the number of lookups for each record to be at most 10. This is specified in the official SPF specification, which you can view here: <a href="https://www.rfc-editor.org/rfc/rfc4408#section-10.1">https://www.rfc-editor.org/rfc/rfc4408#section-10.1</a></p>
<blockquote>
<p>SPF implementations MUST limit the number of mechanisms and modifiers that do DNS lookups to at most 10 per SPF check, including any lookups caused by the use of the &ldquo;include&rdquo; mechanism or the &ldquo;redirect&rdquo; modifier.</p>
</blockquote>
<p>While on first glance it may appear that your SPF record has less than 10 lookups (as your record only specifies five &ldquo;include&rdquo; mechanisms), there are actually 11 lookups here, as some of these &ldquo;include&rdquo; mechanisms recurse into additional includes when queried.</p>
<p>I note that you want to be able to send via Fastmail, Google and Cloudflare. Do you also need to be able to send via mxlogin.com? If not, I recommend you remove the <code>include:mxlogin.com</code> mechanism from your SPF record, as this should resolve the error you&rsquo;re seeing.</p>
<p>Please let me know how you go with this, and don&rsquo;t hesitate to reach back out if you have any further questions.</p>

</content>
<p>
  
</p>

  </main>
  <footer>Made with <a href="https://github.com/janraasch/hugo-bearblog/">Hugo ʕ•ᴥ•ʔ Bear</a>
</footer>

    
</body>

</html>
